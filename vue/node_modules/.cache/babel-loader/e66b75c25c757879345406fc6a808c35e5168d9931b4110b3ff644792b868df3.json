{"ast":null,"code":"import Aside from \"@/components/Aside\";\nimport Header from \"@/components/Header\";\nimport User from \"@/views/User\";\nexport default {\n  name: 'HomeView',\n  data() {\n    return {\n      uName: \"\",\n      //uid:null,\n      tableData: [],\n      total: 0,\n      pageNo: 1,\n      pageSize: 10,\n      dialogFormVisible: false,\n      form: {},\n      collapseBtnClass: \"el-icon-s-operation\",\n      isCollapse: false,\n      sideWidth: 200,\n      logoTextShow: true,\n      headerBg: 'headerBg',\n      //loading: false\n      //checked: true,\n      multipleSelection: []\n    };\n  },\n  created() {\n    this.load();\n    // this.loadingOrClose()\n  },\n\n  components: {\n    User,\n    Header,\n    Aside\n  },\n  methods: {\n    collapse() {\n      //点击收缩按钮触发\n      this.isCollapse = !this.isCollapse;\n      this.logoTextShow = !this.logoTextShow;\n      if (this.isCollapse) {\n        this.logoTextShow = false;\n      } else {\n        this.logoTextShow = true;\n      }\n    },\n    load() {\n      this.request.get(\"http://localhost:9090/user/page\", {\n        params: {\n          pageNo: this.pageNo,\n          pageSize: this.pageSize,\n          uName: this.uName\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.Data;\n        this.total = res.Total;\n      });\n    },\n    save() {\n      this.request.post(\"http://localhost:9090/user\", this.form).then(res => {\n        if (res) {\n          this.$message.success(\"保存成功\");\n        } else {\n          this.$message.error(\"保存失败\");\n        }\n      });\n      this.form = [];\n      this.dialogFormVisible = false;\n      this.load();\n    },\n    handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.multipleSelection = val;\n    },\n    delBatch() {\n      /*      if (this.multipleSelection !== null){\n              let ids=this.multipleSelection.map(v => v.uid) //对象数组[{},{},{}]变成 [1,2,3]\n              console.log(ids)\n              this.deleteBatchData(ids)\n            }else this.load()*/\n      let ids = this.multipleSelection.map(v => v.uid); //对象数组[{},{},{}]变成 [1,2,3]\n      console.log(ids);\n      this.deleteBatchData(ids);\n    },\n    async deleteBatchData(ids) {\n      const info = await this.$confirm('此操作将永久删除所选文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true\n      }).catch(err => err);\n      if (info !== \"confirm\") {\n        return this.$message.error('已取消删除');\n      }\n      await this.request.delete(\"http://localhost:9090/user/del/batch\", {\n        data: ids\n      }).then(res => {\n        if (res) {\n          this.$message.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$message.error(\"删除失败\");\n        }\n      });\n    },\n    async deleteData(uid) {\n      const info = await this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true\n      }).catch(err => err);\n      if (info !== \"confirm\") {\n        return this.$message.error('已取消删除');\n      }\n      // const {data:res}=await this.request.delete(\"http://localhost:9090/user/\"+uid).then(res =>{\n      await this.request.delete(\"http://localhost:9090/user/\" + uid).then(res => {\n        if (res) {\n          this.$message.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$message.error(\"删除失败\");\n        }\n      });\n    },\n    cancel() {\n      this.form = [];\n      this.dialogFormVisible = false;\n    },\n    handleCurrentChange(pageNo) {\n      console.log(pageNo);\n      this.pageNo = pageNo;\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    }\n  }\n};","map":{"version":3,"mappings":"AAwBA;AACA;AACA;AAEA;EACAA;EACAC;IACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACA;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACAC;MAAA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACAC;UACAlB;UACAC;UACAJ;QACA;MACA;QACAsB;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;MACA;MACA;MACA;IAEA;IAEAC;MACA;MACA;IACA;IAEAC;MACAH;MACA;IACA;IACAI;MACA;AACA;AACA;AACA;AACA;MACA;MACAJ;MACA;IACA;IACA;MACA;QACAK;QACAC;QACAC;QACAC;MAEA;MACA;QACA;MACA;MACA;QAAA/B;MAAA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IAEA;IAEA;MACA;QACA4B;QACAC;QACAC;QACAC;MAEA;MACA;QACA;MACA;MACA;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IAEA;IACAC;MACA;MACA;IACA;IACAC;MACAV;MACA;MACA;IACA;IACAW;MACAX;MACA;MACA;IACA;EACA;AACA","names":["name","data","uName","tableData","total","pageNo","pageSize","dialogFormVisible","form","collapseBtnClass","isCollapse","sideWidth","logoTextShow","headerBg","multipleSelection","created","components","User","Header","Aside","methods","collapse","load","params","console","save","handleEdit","handleSelectionChange","delBatch","confirmButtonText","cancelButtonText","type","center","cancel","handleCurrentChange","handleSizeChange"],"sourceRoot":"src/views","sources":["Manage.vue"],"sourcesContent":["<template>\n  <div>\n    <el-container style=\"height: 100%; border: 1px solid #eee\">\n      <el-aside :width=\"isCollapse?'64px':'200px'\" style=\"background-color: rgb(238, 241, 246); height: 100vh; box-shadow: 2px 0 6px darkslategray\">  <!--阴影效果-->\n        <Aside :is-collapse=\"isCollapse\" :logo-text-show=\"logoTextShow\"/>\n      </el-aside>\n\n      <el-container>\n        <el-header style=\"text-align: right; font-size: 12px; border-bottom: 1px solid;line-height: 100px\">\n          <Header :collapse-btn-class=\"collapseBtnClass\" :collapse=\"collapse\"></Header>\n        </el-header>\n\n        <el-main>\n        <!--表示当前页面的子路由会在 router-view 里面展示-->\n          <router-view />\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\n\n\nimport Aside from \"@/components/Aside\";\nimport Header from \"@/components/Header\";\nimport User from \"@/views/User\";\n\nexport default {\n  name: 'HomeView',\n  data(){\n    return{\n      uName:\"\",\n      //uid:null,\n      tableData: [],\n      total: 0,\n      pageNo:1,\n      pageSize:10,\n      dialogFormVisible: false,\n      form:{},\n      collapseBtnClass:\"el-icon-s-operation\",\n      isCollapse:false,\n      sideWidth:200,\n      logoTextShow:true,\n      headerBg:'headerBg',\n      //loading: false\n      //checked: true,\n      multipleSelection:[],\n    }\n  },\n  created() {\n    this.load()\n    // this.loadingOrClose()\n  },\n  components:{\n    User,\n    Header,\n    Aside\n  },\n  methods:{\n    collapse(){ //点击收缩按钮触发\n      this.isCollapse = !this.isCollapse\n      this.logoTextShow=!this.logoTextShow\n      if(this.isCollapse){\n        this.logoTextShow=false\n      }else{\n        this.logoTextShow=true\n      }\n    },\n    load(){\n      this.request.get(\"http://localhost:9090/user/page\",{\n        params:{\n          pageNo:this.pageNo,\n          pageSize:this.pageSize,\n          uName:this.uName\n        }\n      }).then(res =>{\n            console.log(res);\n            this.tableData = res.Data;\n            this.total=res.Total;\n          })\n    },\n    save(){\n      this.request.post(\"http://localhost:9090/user\",this.form).then(res =>{\n        if(res){\n          this.$message.success(\"保存成功\")\n        }else {\n          this.$message.error(\"保存失败\")\n        }\n      })\n      this.form=[]\n      this.dialogFormVisible=false\n      this.load();\n\n    },\n\n    handleEdit(row){\n      this.form=row\n      this.dialogFormVisible=true\n    },\n\n    handleSelectionChange(val){\n      console.log(val)\n      this.multipleSelection=val\n    },\n    delBatch(){\n/*      if (this.multipleSelection !== null){\n        let ids=this.multipleSelection.map(v => v.uid) //对象数组[{},{},{}]变成 [1,2,3]\n        console.log(ids)\n        this.deleteBatchData(ids)\n      }else this.load()*/\n      let ids=this.multipleSelection.map(v => v.uid) //对象数组[{},{},{}]变成 [1,2,3]\n      console.log(ids)\n      this.deleteBatchData(ids)\n    },\n    async deleteBatchData(ids){\n      const info = await this.$confirm('此操作将永久删除所选文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true,\n\n      }).catch(err=>err)\n      if (info!==\"confirm\"){\n        return this.$message.error('已取消删除')\n      }\n      await this.request.delete(\"http://localhost:9090/user/del/batch\",{data:ids}).then(res =>{\n        if(res){\n          this.$message.success(\"删除成功\")\n          this.load()\n        }else {\n          this.$message.error(\"删除失败\")\n        }\n      })\n\n    },\n\n    async deleteData(uid){\n      const info = await this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true,\n\n      }).catch(err=>err)\n        if (info!==\"confirm\"){\n          return this.$message.error('已取消删除')\n        }\n      // const {data:res}=await this.request.delete(\"http://localhost:9090/user/\"+uid).then(res =>{\n      await this.request.delete(\"http://localhost:9090/user/\"+uid).then(res =>{\n        if(res){\n          this.$message.success(\"删除成功\")\n          this.load()\n        }else {\n          this.$message.error(\"删除失败\")\n        }\n      })\n\n    },\n    cancel(){\n      this.form=[];\n      this.dialogFormVisible=false;\n    },\n    handleCurrentChange(pageNo){\n      console.log(pageNo)\n      this.pageNo=pageNo\n      this.load()\n    },\n    handleSizeChange(pageSize){\n      console.log(pageSize)\n      this.pageSize=pageSize\n      this.load()\n    }\n  }\n}\n</script>\n\n<style>\n.headerBg{\n  background: aqua !important;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}